{
    "$id": "https://microsoft.com/aide-userconfig.schema.json",
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "title": "AKS edge Remote Deployment Configuration",
    "type": "object",
    "properties": {
        "SchemaVersion": {
            "type": "string",
            "default": "1.0",
            "description": "Version of the schema/format of the json"
        },
        "Version": {
            "type": "string",
            "default": "1.0",
            "description": "Version of the json instance"
        },
        "AksEdgeProduct": {
            "type": "string",
            "description": "Product name"
        },
        "AksEdgeProductUrl": {
            "type": "string",
            "description": "Product URL for download"
        },
        "KubernetesDistribution": {
            "enum": [
                "k8s",
                "k3s"
            ],
            "description": "Kubernetes Distribution, based on installed msi, auto populated"
        },
        "Azure": {
            "type": "object",
            "properties": {
                "ClusterName": {
                    "type": "string"
                },
                "Connect": {
                    "type": "boolean",
                    "default": false
                },
                "Location": {
                    "type": "string"
                },
                "ResourceGroupName": {
                    "type": "string"
                },
                "SubscriptionId": {
                    "type": "GUID"
                },
                "TenantId": {
                    "type": "GUID"
                },
                "SubscriptionName": {
                    "type": "string"
                },
                "ServicePrincipalName": {
                    "type": "string"
                },
                "Auth" : {
                    "type" : "object",
                    "propertires": {
                        "ServicePrincipalId": {
                            "type": "string"
                        },
                        "Password": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "DeployOptions": {
            "type": "object",
            "properties": {
                "ClusterJoinToken": {
                    "type": "string"
                },
                "ControlPlane": {
                    "type": "boolean",
                    "default": false
                },
                "DiscoveryTokenHash": {
                    "type": "string"
                },
                "CertificateKey": {
                    "type": "string"
                },
                "ClusterId": {
                    "type": "guid"
                },
                "Headless": {
                    "type": "boolean",
                    "default": false
                },
                "JoinCluster": {
                    "type": "boolean",
                    "default": false
                },
                "NetworkPlugin": {
                    "enum": [
                        "calico",
                        "flannel"
                    ],
                    "$comment": "http_proxy, introduced schema version 1.1",
                    "default": "flannel"
                },
                "SingleMachineCluster": {
                    "type": "boolean",
                    "default": false
                },
                "TimeoutSeconds": {
                    "type": "int",
                    "default": 900
                },
                "NodeType": {
                    "enum": [
                        "Linux",
                        "LinuxAndWindows",
                        "Windows"
                    ],
                    "default": "Linux"
                }
            },
            "required" : ["SingleMachineCluster","NodeType"]
        },
        "InstallOptions": {
            "type": "object",
            "properties": {
                "InstallPath": {
                    "type": "string"
                },
                "VhdxPath": {
                    "type": "string"
                }
            }
        },
        "EndUser": {
            "type": "object",
            "properties": {
                "AcceptEula": {
                    "type": "boolean",
                    "default": false
                },
                "AcceptOptionalTelemetry": {
                    "type": "boolean",
                    "default": false
                }
            },
            "required" : ["AcceptEula"]
        },
        "LinuxVm": {
            "type": "object",
            "properties": {
                "CpuCount": {
                    "type": "integer",
                    "default": 2,
                    "minimum" : 2
                },
                "MemoryInMB": {
                    "type": "integer",
                    "default": 2048,
                    "multipleOf" : 2,
                    "minimum" : 2048
                },
                "DataSizeInGB": {
                    "type": "integer",
                    "default": 10
                },
                "Ip4Address": {
                    "type": "string",
                    "format": "ipv4"
                },
                "MacAddress": {
                    "type": "string"
                },
                "Mtu": {
                    "type": "integer"
                }
            },
            "required" : ["CpuCount","MemoryInMB"]
        },
        "WindowsVm": {
            "type": "object",
            "properties": {
                "CpuCount": {
                    "type": "integer",
                    "default": 2,
                    "minimum" : 2
                },
                "MemoryInMB": {
                    "type": "integer",
                    "default": 2048,
                    "multipleOf" : 2,
                    "minimum" : 2048
                },
                "Ip4Address": {
                    "type": "string",
                    "format": "ipv4"
                },
                "MacAddress": {
                    "type": "string"
                },
                "Mtu": {
                    "type": "integer"
                }
            },
            "required" : ["CpuCount","MemoryInMB"]
        },
        "Network": {
            "type": "object",
            "properties": {
                "VSwitch": {
                    "Type": {
                        "enum": [
                            "External",
                            "Internal"
                        ]
                    },
                    "AdapterName": {
                        "type": "string"
                    },
                    "Name": {
                        "type": "string"
                    }
                },
                "ControlPlaneEndpointIp": {
                    "type": "string",
                    "format": "ipv4"
                },
                "DnsServers": {
                    "type": "array",
                    "items": {
                        "type": "string",
                        "format": "ipv4"
                    },
                    "minitems": 1
                },
                "InternetDisabled" : {
                    "type" : "boolean",
                    "default": false
                },
                "Ip4GatewayAddress": {
                    "type": "string",
                    "format": "ipv4"
                },
                "Ip4PrefixLength": {
                    "type": "integer",
                    "default": 24,
                    "minimum" : 1,
                    "maximum" : 31
                },
                "ServiceIPRangeSize": {
                    "type": "integer",
                    "default": 0,
                    "minimum" : 1,
                    "maximum" : 127
                },
                "ServiceIPRangeStart": {
                    "type": "string",
                    "format": "ipv4"
                },
                "ServiceIPRangeEnd": {
                    "type": "string",
                    "format": "ipv4"
                },
                "SkipAddressFreeCheck": {
                    "type": "boolean",
                    "default": false
                },
                "Proxy": {
                    "type": "object",
                    "properties": {
                        "Http": {
                            "type": "string",
                            "$comment": "http_proxy, introduced schema version 1.1"
                        },
                        "Https": {
                            "type": "string",
                            "$comment": "https_proxy, introduced schema version 1.1"
                        },
                        "No": {
                            "type": "string",
                            "$comment": "no_proxy, introduced schema version 1.1"
                        }
                    }
                }
            }
        }
    }
}